<div class="container mt-5 text-center">
  <h1 class="mb-4">List of Buses</h1>

  <% @buses.each do |bus| %>
    <div class="card mb-4 position-relative">
      <img src="<%= asset_path('bus1.avif') %>" class="card-img-top" alt="Bus Image" style="max-height: 300px; object-fit: cover;">
      <div class="card-img-overlay d-flex align-items-center justify-content-center">
        <div class="text-white text-center">
          <h2 class="card-title mb-3"><%= link_to bus.name, bus, class: "text-white" %></h2>
          <p class="card-text">Registration No: <%= bus.registration_no %></p>
          <p class="card-text">Route: <%= bus.route %></p>
          <p class="card-text">Total Seats: <%= bus.seats %></p>
          <p class="card-text">Available Seats: <%= bus.seats - bus.reservations.sum(:seats) %></p>
          <%= link_to "Reserve a Seat", new_bus_reservation_path(bus_id: bus.id), class: "btn btn-primary" %>
          <%= link_to "See Bus details", bus_path(bus), class: "btn btn-secondary" %>
        </div>
      </div>
    </div>
  <% end %>
  
  <% if user_signed_in? && current_user.owner? %>
  <%= link_to 'Add New Bus', new_bus_path, class: 'btn btn-success' %>
  <%= link_to 'See All Reservations', index_owner_reservations_path, class: 'btn btn-info' %>
<% else %>
  <p>Debug: User is not signed in or not identified as an owner.</p>
<% end %>

</div>


  </div>
</div>
